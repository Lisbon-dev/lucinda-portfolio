---
import SimpleDialog from './SimpleDialog.astro';
import ContactForm from '../forms/ContactForm.astro';
---

<SimpleDialog id="contact-dialog" class="contact-dialog">
  <h2>Get in Touch</h2>
  
  <div class="form-container">
    <ContactForm />
  </div>
</SimpleDialog>

<style>
  /* Make dialog scrollable on smaller viewports */
  :global(.contact-dialog[open]) {
    max-height: 100vh;
    overflow-y: auto;
  }

  .contact-dialog :global(.form-container) {
    width: 100%;
    max-width: 400px;
    margin-top: var(--spacing-lg, 2.5rem);
  }

  .contact-dialog :global(.contact-form) {
    text-align: left;
  }

  .contact-dialog :global(.form-field) {
    margin-bottom: var(--spacing-md, 1.5rem);
  }

  .contact-dialog :global(.form-actions) {
    text-align: center;
    margin-top: var(--spacing-lg, 2.5rem);
  }

  /* Mobile adjustments */
  @media (max-width: 768px) {
    .contact-dialog :global(.form-container) {
      max-width: 100%;
      margin-top: var(--spacing-xs, 1.5rem);
    }
  }

  /* Reduce spacing on short viewports to avoid scrolling */
  @media (max-height: 700px) {
    .contact-dialog :global(.form-container) {
      margin-top: var(--spacing-md, 1.5rem);
    }
    .contact-dialog :global(.form-field) {
      margin-bottom: var(--spacing-sm, 1rem);
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const dialog = document.getElementById('contact-dialog');
    if (!dialog) return;

    const observer = new MutationObserver(() => {
      const isOpen = dialog.hasAttribute('open');
      document.body.style.overflow = isOpen ? 'hidden' : '';
    });

    observer.observe(dialog, { attributes: true, attributeFilter: ['open'] });
  });
</script>
