---
export interface Props {
  items?: Array<{
    id: string;
    title: string;
    image?: string;
    description?: string;
    href?: string;
  }>;
  columns?: 'auto' | 1 | 2 | 3 | 4;
  gap?: 'sm' | 'md' | 'lg';
  aspectRatio?: string;
  class?: string;
}

const {
  items = [
    { id: '1', title: 'Portfolio Item 1' },
    { id: '2', title: 'Portfolio Item 2' },
    { id: '3', title: 'Portfolio Item 3' },
    { id: '4', title: 'Portfolio Item 4' }
  ],
  columns = 'auto',
  gap = 'md',
  aspectRatio = '4/5',
  class: className = '',
} = Astro.props;

const gridClasses = [
  'portfolio-grid',
  `grid--columns-${columns}`,
  `grid--gap-${gap}`,
  className
].filter(Boolean).join(' ');
---

<div class={gridClasses}>
  {items.map(item => (
    <article class="portfolio-item" data-id={item.id}>
      <div class="portfolio-content" style={`aspect-ratio: ${aspectRatio};`}>
        {item.image ? (
          <img src={item.image} alt={item.title} loading="lazy" />
        ) : (
          <div class="portfolio-placeholder">
            <p class="small-text">{item.title}</p>
          </div>
        )}
      </div>
      {item.description && (
        <div class="portfolio-meta">
          <h3 class="portfolio-title small-text">{item.title}</h3>
          <p class="portfolio-description small-text">{item.description}</p>
        </div>
      )}
    </article>
  ))}
</div>

<style>
  .portfolio-grid {
    display: grid;
    justify-content: center;
    padding: 3rem 0 2rem;
  }

  .grid--columns-auto {
    grid-template-columns: repeat(auto-fit, minmax(280px, 25.26%));
  }

  .grid--columns-1 { grid-template-columns: 1fr; }
  .grid--columns-2 { grid-template-columns: repeat(2, 1fr); }
  .grid--columns-3 { grid-template-columns: repeat(3, 1fr); }
  .grid--columns-4 { grid-template-columns: repeat(4, 1fr); }

  .grid--gap-sm { gap: var(--spacing-grid-gap-mobile); }
  .grid--gap-md { gap: var(--spacing-grid-gap-tablet); }
  .grid--gap-lg { gap: var(--spacing-lg); }

  .portfolio-item {
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .portfolio-content {
    width: 100%;
    position: relative;
    overflow: hidden;
    transition: transform var(--transition-normal);
  }

  .portfolio-content:hover {
    transform: scale(1.02);
  }

  .portfolio-content img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform var(--transition-normal);
  }

  .portfolio-content:hover img {
    transform: scale(1.05);
  }

  .portfolio-placeholder {
    background-color: var(--color-modal-bg);
    border: 1px solid var(--color-primary);
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: border-color var(--transition-normal);
  }

  .portfolio-placeholder:hover {
    border-color: var(--color-primary-hover);
  }

  .portfolio-meta {
    margin-top: var(--spacing-xs);
  }

  .portfolio-title {
    margin-bottom: var(--spacing-xs);
    font-weight: 400;
    font-family: var(--font-alt-heading);
    font-size: var(--text-sm);
    font-weight: 300;
    color: var(--color-text-primary);
  }

  .portfolio-description {
    opacity: 0.8;
    font-family: var(--font-alt-heading);
    font-size: var(--text-sm);
    font-weight: 300;
    color: var(--color-text-primary);
  }

  /* Responsive adjustments */
  @media (min-width: 480px) {
    .portfolio-grid {
      gap: 2rem;
      padding: 4rem 0 2.5rem;
    }
  }

  @media (min-width: 768px) {
    .portfolio-grid {
      gap: var(--spacing-grid-gap-tablet);
      padding: 8rem 0 3rem;
    }
  }

  @media (min-width: 1200px) {
    .portfolio-grid {
      padding: 12rem 0 4rem;
    }
  }

  @media (min-width: 1512px) {
    .grid--columns-auto {
      grid-template-columns: repeat(auto-fit, 382px);
      gap: var(--spacing-grid-gap-desktop);
      padding: 726px 0 202px;
    }
  }

  @media (max-width: 767px) {
    .grid--columns-auto {
      grid-template-columns: 1fr;
    }

    .portfolio-grid {
      gap: var(--spacing-grid-gap-mobile);
      padding: var(--spacing-md) 0;
    }
  }
</style>